# いどばた論点整理モジュール (Idobata Analyst) - 詳細版

> いどばた論点整理モジュールは、オンライン上の政策熟議プラットフォームを構築する「いどばた」プロジェクトの一部です。このモジュールは、フォーラムやSNSの投稿を分析し、論点を抽出して整理するためのツールです。

## プロジェクト概要

いどばた論点整理モジュールは、デジタル民主主義を促進するためのツールです。このプロジェクトは、以下のような目的を持っています：

1. オンライン上の議論から主要な論点を抽出する
2. 各論点に対する異なる立場（スタンス）を特定する
3. 議論の全体像を視覚的に表現する
4. 利用者が多様な意見を理解しやすくする

このプロジェクトは、「いどばた」プロジェクト全体の一部であり、他のモジュールと連携して機能します：
- idobata-agent: フォーラムの投稿に反応し、モデレーションを行うモジュール
- idobata-analyst: フォーラムやSNSの投稿を分析し、レポートを作成するモジュール（本モジュール）
- idobata-infra: フォーラムのインフラを構築する設定
- idobata-sns-agent: SNSの投稿を収集したり、投稿を行うためのモジュール

## 主要機能の詳細

### CSVアップロードと分析

1. 管理者認証: 管理者は専用のAPIキーを使用して認証を行います
2. プロジェクト作成: 分析対象のプロジェクト名、説明、抽出トピック、背景情報を設定します
3. CSVアップロード: 投稿データをCSV形式でアップロードします（必須列：content, sourceType, sourceUrl）
4. 論点抽出処理: AIを使用して投稿から主要な論点を抽出します
5. 立場分析: 各投稿の立場（スタンス）を分析します
6. レポート生成: 分析結果をビジュアルレポートとして表示します

### 論点抽出の仕組み

論点抽出は以下のステップで行われます：
1. 投稿データの前処理
2. OpenRouter APIを使用したAI分析
3. 論点の抽出と整理
4. 各論点に対する立場の特定
5. 結果の保存とビジュアル化

### AIチャット機能

利用者は各論点についてAIとチャットすることができます：
1. 論点の詳細な説明を受ける
2. 異なる立場の理解を深める
3. 関連する投稿を参照する

## 技術スタックの詳細

### バックエンド
- Node.js + Express: RESTful APIの実装
- MongoDB: データの永続化
- OpenRouter API: AI分析のためのLLMアクセス
- Docker: 開発・本番環境の構築

### フロントエンド
- React: UIコンポーネント
- TypeScript: 型安全な開発
- Chakra UI: UIフレームワーク
- Chart.js: データの可視化

## 開発環境のセットアップ

1. 環境変数の設定:
   - ADMIN_API_KEY: 管理者認証用パスワード
   - OPENROUTER_API_KEY: OpenRouter APIキー

2. アプリケーションの起動:
   ```bash
   make setup
   make containers-start
   ```

3. アクセス:
   - Webブラウザで http://localhost:3000 にアクセス
   - 管理者認証は http://localhost:3000/adminauth

## 現在の課題と改善点

1. ビジュアル分析の改善:
   - モバイル対応の強化
   - シェア機能の追加
   - 表示の最適化

2. 論点抽出の精度向上:
   - 抽出アルゴリズムの改善
   - 多様な意見の反映
   - テールの部分の論点も含める

3. AIチャットの機能強化:
   - チャット履歴の保存
   - 論点へのリンク追加
   - レスポンスの質の向上

4. 開発環境の改善:
   - テスト導入
   - CI/CDの設定
   - APIレスポンスのキャッシュ

## コントリビューション方法

1. GitHub Projectでタスクを確認: https://github.com/orgs/digitaldemocracy2030/projects/1/views/1
2. good first issueタグがついたIssueから始めることをお勧めします
3. Issueに着手する際は、自身のアカウントをassigneeに指定してください
4. Pull Requestを作成する際は、CLA.mdに同意が必要です

## 利用例

例えば、YouTubeのコメントを収集したCSVファイルをアップロードすると、以下のような分析結果が得られます：
1. 主要な論点のリスト
2. 各論点に対する立場の分布（円グラフ）
3. コメントの一覧と立場の分類
4. ビジュアルレポート（論点の関係性を示す図）

## 将来の展望

1. 他のAIとの連携強化
2. 議論の粒度をGoogleマップのズームのように行き来できる機能
3. ユニークなユーザーIDでのカウント機能
4. グラウンディング機能の追加
5. 多言語対応